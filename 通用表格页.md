通用表格页.md

row 页面标题 pageTitle

row 搜索栏 search - [searchModel]

row 表格 table - [columns,data]

row 分页 page - []

row 图表 graph - [echartOption]

row 表单 form - [formModel,formRules]

## 数据字段

可用户生成表单

```js
let fields = [{ label, key, order }];
```

## 动态表头处理

```js
// 通用自定义 表格 动态表头
function getDefaultColumns(pollutantList, isInValues = true) {
  // 站点 可配 多个设备 , 设备 可监测 多种物质 (污染物,因子)
  // 表头
  let headers = [
    // 基本部分 站点基本信息
    { title: "站点名称1", key: "siteName" },
    { title: "站点编码", key: "siteCode" },
    // 基本部分 数据的时间
    { title: "时间", key: "time" },
    // 其他维度的数据 动态的部分  物质  行转列
    { title: "PM2.5", key: "a001" }, // 物质 , 物质编码
    { title: "PM10", key: "a002" },
  ];
  // 数据
  let data = [
    {
      siteName: "站点名称",
      siteCode: "aa22",
      time: "2020-12-12 11:11:11",
      values: {
        a001: "",
        a002: "",
      },
      keys: [
        { title: "PM2.5", key: "a001" },
        { title: "PM10", key: "a002" },
      ],
    },
    {
      siteName: "站点名称2",
      siteCode: "aa33",
      time: "2020-12-12 11:11:11",
      // 理论上行数据 动态列的数据一样, 但也可能不同, 则采取并集表头,  每个 监测站点 有不同 设备有不同的监测能力 pm2.5 , pm10
      values: {
        a002: "",
      },
      // 冗余表头 这条数据的表头(监测站点)
      keys: [{ title: "PM10", key: "a002" }],
    },
  ];

  // 动态的 列的值 在一个
  const getV = (row, key) => {
    if (isInValues) return row.values[key];
    else return row[key];
  };
  // 固定不变的列
  let baseColumns = [];
  // 动态列
  let columns = [];
  pollutantList.forEach((item) => {
    columns.push({
      title: `${item.pollutantName}(${item.unit})`,
      key: item.pollutantCode,
      align: "center",
      width: 200,
      render: (h, params) => {
        return h("span", {}, getV(params.row, item.pollutantCode));
      },
    });
  });
  return { baseColumns, columns };
}
// 自定义 render
function getCustomColumns(isInValue = true) {
  return {
    key: {
      title: "PM10(ppb)",
      key: "a002",
      align: "center",
      width: 200,
      render: () => {},
    },
  };
}

let { baseColumns, columns } = getDefaultColumns(pollutantList);

// 动态 组装表头
columns = [
  // 基础表头
  ...baseColumns,
  // 动态因子表头
  ...columns,
  {
    title: " ",
    align: "center",
    key: "placeholder", // 占位表头 用于自适应
  },
];

// 表头覆盖  自定义 render
columns.forEach((item, index) => {
  let keys = Object.keys(customColumns);
  if (keys.indexOf(item.key) > -1) columns[index] = customColumns[item.key];
});
```

## 表单模型

## 搜索栏/查询 模型

```js
const pageModel = {
  pageIndex: 1,
  pageSize: 10,
  pageChunk: [10, 20, 50],
};

let searchModel = {};
```

## echartOption

```js
// 处理数据
function handleData(data) {
  return {
    title: "",
    x: [],
    data: [],
  };
}

function getOption(data) {
  return {
    title: data.title,
  };
}
```
